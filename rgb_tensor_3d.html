<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CNN Input: RGB Tensors</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
            min-height: 100vh;
            color: #e8e8e8;
            padding: 40px 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            margin-bottom: 40px;
        }

        h1 {
            font-size: 2.2rem;
            background: linear-gradient(90deg, #00d9ff, #00ff88);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 10px;
        }

        .subtitle {
            color: #888;
        }

        .main-section {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            padding: 40px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .tensor-shape {
            text-align: center;
            margin-bottom: 30px;
            font-family: 'Courier New', monospace;
            font-size: 1.3rem;
            color: #feca57;
        }

        .visualization {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 30px;
            flex-wrap: wrap;
        }

        .image-box {
            text-align: center;
        }

        .image-box h3 {
            margin-bottom: 15px;
            font-size: 1rem;
            color: #aaa;
        }

        .image-container {
            width: 150px;
            height: 150px;
            border-radius: 10px;
            overflow: hidden;
            border: 2px solid rgba(255, 255, 255, 0.2);
            background: rgba(0,0,0,0.3);
            cursor: pointer;
        }

        #originalImage {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: none;
        }

        .placeholder {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #666;
            font-size: 0.85rem;
            text-align: center;
            padding: 10px;
        }

        .arrow {
            font-size: 2rem;
            color: #00ff88;
        }

        .channels {
            display: flex;
            gap: 15px;
        }

        .channel {
            text-align: center;
        }

        .channel-label {
            font-weight: bold;
            margin-bottom: 8px;
            font-size: 0.9rem;
        }

        .channel-label.red { color: #ff6b6b; }
        .channel-label.green { color: #51cf66; }
        .channel-label.blue { color: #339af0; }

        .channel canvas {
            width: 120px;
            height: 120px;
            border-radius: 8px;
        }

        .channel canvas.red { border: 2px solid #ff6b6b; }
        .channel canvas.green { border: 2px solid #51cf66; }
        .channel canvas.blue { border: 2px solid #339af0; }

        .channel .dim {
            margin-top: 8px;
            font-size: 0.75rem;
            color: #888;
            font-family: 'Courier New', monospace;
        }

        .samples {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin-top: 30px;
        }

        .sample-btn {
            background: rgba(255, 255, 255, 0.1);
            color: #fff;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.85rem;
            transition: all 0.2s;
        }

        .sample-btn:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .info-box {
            margin-top: 30px;
            padding: 20px;
            background: rgba(0, 217, 255, 0.1);
            border-radius: 10px;
            border-left: 3px solid #00d9ff;
        }

        .info-box p {
            color: #ccc;
            line-height: 1.7;
            font-size: 0.95rem;
        }

        .info-box code {
            color: #00ff88;
            background: rgba(0,0,0,0.3);
            padding: 2px 6px;
            border-radius: 4px;
        }

        #fileInput { display: none; }

        @media (max-width: 700px) {
            .visualization { flex-direction: column; }
            .arrow { transform: rotate(90deg); }
            .channels { flex-wrap: wrap; justify-content: center; }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>CNN Input: RGB Tensors</h1>
            <p class="subtitle">How images become 3D tensors for neural networks</p>
        </header>

        <div class="main-section">
            <div class="tensor-shape">Input Shape: [3 √ó H √ó W]</div>

            <div class="visualization">
                <div class="image-box">
                    <h3>Original Image</h3>
                    <div class="image-container" onclick="document.getElementById('fileInput').click()">
                        <img id="originalImage" alt="Original">
                        <div class="placeholder" id="placeholder">Click to upload<br>or use samples</div>
                    </div>
                    <input type="file" id="fileInput" accept="image/*" onchange="handleUpload(event)">
                </div>

                <div class="arrow">‚Üí</div>

                <div class="channels">
                    <div class="channel">
                        <div class="channel-label red">Red Channel</div>
                        <canvas id="redCanvas" class="red" width="120" height="120"></canvas>
                        <div class="dim">[H √ó W]</div>
                    </div>
                    <div class="channel">
                        <div class="channel-label green">Green Channel</div>
                        <canvas id="greenCanvas" class="green" width="120" height="120"></canvas>
                        <div class="dim">[H √ó W]</div>
                    </div>
                    <div class="channel">
                        <div class="channel-label blue">Blue Channel</div>
                        <canvas id="blueCanvas" class="blue" width="120" height="120"></canvas>
                        <div class="dim">[H √ó W]</div>
                    </div>
                </div>
            </div>

            <div class="samples">
                <button class="sample-btn" onclick="loadSample('gradient')">üåà Gradient</button>
                <button class="sample-btn" onclick="loadSample('colors')">üé® Colors</button>
                <button class="sample-btn" onclick="loadSample('scene')">üèûÔ∏è Scene</button>
            </div>

            <div class="info-box">
                <p>
                    <strong>CNN Input Format:</strong> Images are represented as 3D tensors with shape <code>[C √ó H √ó W]</code> where C=3 for RGB. Each channel is a 2D matrix containing pixel intensities (0-255). The convolution layers process all three channels simultaneously to extract features.
                </p>
            </div>
        </div>
    </div>

    <script>
        const SIZE = 120;

        function handleUpload(e) {
            const file = e.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = (ev) => loadImage(ev.target.result);
                reader.readAsDataURL(file);
            }
        }

        function loadImage(src) {
            const img = new Image();
            img.onload = () => {
                document.getElementById('originalImage').src = src;
                document.getElementById('originalImage').style.display = 'block';
                document.getElementById('placeholder').style.display = 'none';
                processChannels(img);
            };
            img.src = src;
        }

        function processChannels(img) {
            const temp = document.createElement('canvas');
            temp.width = temp.height = SIZE;
            const ctx = temp.getContext('2d');
            ctx.drawImage(img, 0, 0, SIZE, SIZE);
            const data = ctx.getImageData(0, 0, SIZE, SIZE);

            const rCtx = document.getElementById('redCanvas').getContext('2d');
            const gCtx = document.getElementById('greenCanvas').getContext('2d');
            const bCtx = document.getElementById('blueCanvas').getContext('2d');

            const rData = rCtx.createImageData(SIZE, SIZE);
            const gData = gCtx.createImageData(SIZE, SIZE);
            const bData = bCtx.createImageData(SIZE, SIZE);

            for (let i = 0; i < data.data.length; i += 4) {
                // Red channel
                rData.data[i] = data.data[i];
                rData.data[i+1] = 0;
                rData.data[i+2] = 0;
                rData.data[i+3] = 255;

                // Green channel
                gData.data[i] = 0;
                gData.data[i+1] = data.data[i+1];
                gData.data[i+2] = 0;
                gData.data[i+3] = 255;

                // Blue channel
                bData.data[i] = 0;
                bData.data[i+1] = 0;
                bData.data[i+2] = data.data[i+2];
                bData.data[i+3] = 255;
            }

            rCtx.putImageData(rData, 0, 0);
            gCtx.putImageData(gData, 0, 0);
            bCtx.putImageData(bData, 0, 0);
        }

        function loadSample(type) {
            const canvas = document.createElement('canvas');
            canvas.width = canvas.height = SIZE;
            const ctx = canvas.getContext('2d');

            if (type === 'gradient') {
                for (let y = 0; y < SIZE; y++) {
                    for (let x = 0; x < SIZE; x++) {
                        ctx.fillStyle = `rgb(${x*2}, ${y*2}, ${(SIZE-x)*2})`;
                        ctx.fillRect(x, y, 1, 1);
                    }
                }
            } else if (type === 'colors') {
                const c = [['#ff6b6b','#feca57','#48dbfb'],['#ff9ff3','#54a0ff','#5f27cd'],['#00d2d3','#1dd1a1','#fdcb6e']];
                const s = SIZE/3;
                for (let r = 0; r < 3; r++) {
                    for (let col = 0; col < 3; col++) {
                        ctx.fillStyle = c[r][col];
                        ctx.fillRect(col*s, r*s, s, s);
                    }
                }
            } else if (type === 'scene') {
                const grad = ctx.createLinearGradient(0, 0, 0, SIZE);
                grad.addColorStop(0, '#74b9ff');
                grad.addColorStop(0.6, '#a29bfe');
                grad.addColorStop(1, '#2d3436');
                ctx.fillStyle = grad;
                ctx.fillRect(0, 0, SIZE, SIZE);
                ctx.beginPath();
                ctx.arc(SIZE*0.75, SIZE*0.25, 15, 0, Math.PI*2);
                ctx.fillStyle = '#ffeaa7';
                ctx.fill();
            }

            loadImage(canvas.toDataURL());
        }

        // Init empty canvases
        ['redCanvas','greenCanvas','blueCanvas'].forEach(id => {
            const ctx = document.getElementById(id).getContext('2d');
            ctx.fillStyle = 'rgba(0,0,0,0.4)';
            ctx.fillRect(0, 0, SIZE, SIZE);
        });
    </script>
</body>
</html>
